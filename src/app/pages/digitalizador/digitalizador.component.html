<div class="bg-gray-100 p-0 container mx-auto">
  <div class="flex flex-col gap-4 h-screen justify-center items-center">
    <div
      class="bg-white border-0 shadow-lg sm:rounded-3xl overflow-hidden w-11/12"
    >
      <div class="grid grid-cols-10 w-full">
        <div
          class="col-span-2 *:h-[200px] *:w-full *:border-b *:border-slate-700"
        >
          <div
            class="bg-gray-300 bg-opacity-80 text-gray-900 flex flex-col justify-center items-center gap-2 border-r border-b border-slate-700"
          >
            <h2 class="text-4xl">Esperados</h2>
            <span class="text-[37px]">50,000</span>
          </div>
          <div
            class="bg-blue-300 bg-opacity-80 text-blue-900 flex flex-col justify-center items-center gap-2 border-r border-b border-slate-700"
          >
            <h2 class="text-3xl">Digitalizados</h2>
            <span class="text-[37px]">20,000</span>
          </div>
          <div
            class="bg-green-300 bg-opacity-80 text-green-900 flex flex-col justify-center items-center gap-2 border-r border-slate-700"
          >
            <h2 class="text-4xl">Enviados</h2>
            <span class="text-[37px]">7,500</span>
          </div>
        </div>
        <div class="col-span-5 px-2 h-[600px]">
          <div class="h-[125px] flex flex-row items-center justify-start gap-10 text-3xl pt-7">
            <b><p>DIGITALIZADOR</p></b>
            <div [ngClass]="{ 'animate-spin': isMonitoring }">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="50"
                height="50"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon icon-tabler icons-tabler-outline icon-tabler-rotate-clockwise"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M4.05 11a8 8 0 1 1 .5 4m-.5 5v-5h5" />
              </svg>
            </div>
            <p>
              Monitoreando <br /> Directorio
            </p>
          </div>
          <div
            class="chart-container h-[400px] flex flex-col items-center justify-end gap-10 pt-5"
          >
            <canvas class="w-full h-full" id="myBarChart"> {{ chart }} </canvas>
          </div>
        </div>
        <div class="col-span-3">
          <div
            class="h-[100px] bg-white flex flex-row gap-4 justify-around items-center *:h-[50px] *:w-[100px] *:flex *:justify-center *:items-center border-l border-slate-700"
          >
            <button
              class="rounded-lg bg-green-500 hover:bg-green-600 transition-colors"
              (click)="startMonitoreo()"
              [disabled]="isMonitoring"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                class="icon icon-tabler icons-tabler-filled icon-tabler-player-play"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path
                  d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z"
                />
              </svg>
            </button>
            <button
              class="rounded-lg bg-red-500 hover:bg-red-600 transition-colors"
              (click)="stopMonitoreo()"
              [disabled]="!isMonitoring"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                class="icon icon-tabler icons-tabler-filled icon-tabler-player-stop"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path
                  d="M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z"
                />
              </svg>
            </button>
          </div>
          <div class="h-[400px] bg-white border-l border-slate-700">
            <form [formGroup]="myForm" class="w-full h-[400px]">
              <mat-form-field class="w-full" [ngStyle]="{ height: '64px' }">
                <mat-label>CURP: </mat-label>
                <input
                  formControlName="curp"
                  matInput
                  maxlength="18"
                  (input)="toUpperCaseCurp($event)"
                />
                <mat-error *ngIf="isValidField('curp')" class="text-red-500">
                  {{ getFieldError("curp") }}
                </mat-error>
              </mat-form-field>

              <button
                class="rounded-lg bg-orange-300 hover:bg-orange-400 transition-colors mx-auto p-2 gap-20 flex justify-between items-center mx-5 mb-2"
                (click)="buscarCurps()"
              >
                BUSCAR
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="icon icon-tabler icons-tabler-outline icon-tabler-search"
                >
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
                  <path d="M21 21l-6 -6" />
                </svg>
              </button>

              <div class="h-[275px] overflow-y-auto">
                <mat-selection-list
                  #curpses
                  [formControl]="curpsesControl"
                  name="curpses"
                  [multiple]="false"
                >
                  @for (curp of curps(); track curp) {
                  <mat-list-option
                    [ngStyle]="{ height: '32px' }"
                    [value]="curp.name"
                    >{{ curp.name }}</mat-list-option
                  >
                  }
                </mat-selection-list>
              </div>

              <!-- <mat-form-field class="w-full">
                <mat-label>Assignee</mat-label>
                <input type="text" matInput [formControl]="myControl" [matAutocomplete]="auto">


                <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                  <mat-list class="max-h-[325px] overflow-y-auto" role="list">
                    @for (option of filteredOptions | async; track option) {
                    <mat-option [value]="option">{{option.name}}</mat-option>
                    }
                  </mat-list>
                </mat-autocomplete>
                <mat-list role="list" class="max-h-[325px] overflow-y-auto">
                  <mat-list-item role="listitem">Naranja</mat-list-item>
                  <mat-list-item role="listitem">Manzana</mat-list-item>
                  <mat-list-item role="listitem">Pera</mat-list-item>
                  <mat-list-item role="listitem">Uva</mat-list-item>
                  <mat-list-item role="listitem">Mango</mat-list-item>
                  <mat-list-item role="listitem">Sandia</mat-list-item>
                  <mat-list-item role="listitem">Guayaba</mat-list-item>
                  <mat-list-item role="listitem">Durazno</mat-list-item>
                  <mat-list-item role="listitem">Fresa</mat-list-item>
                  <mat-list-item role="listitem">Naranja</mat-list-item>
                  <mat-list-item role="listitem">Manzana</mat-list-item>
                  <mat-list-item role="listitem">Pera</mat-list-item>
                  <mat-list-item role="listitem">Uva</mat-list-item>
                  <mat-list-item role="listitem">Mango</mat-list-item>
                  <mat-list-item role="listitem">Sandia</mat-list-item>
                  <mat-list-item role="listitem">Guayaba</mat-list-item>
                  <mat-list-item role="listitem">Durazno</mat-list-item>
                  <mat-list-item role="listitem">Fresa</mat-list-item>
                </mat-list>

              </mat-form-field> -->
            </form>
          </div>
          <div
            class="h-[100px] bg-white flex flex-col justify-center gap-2 border-l border-t px-4"
          >
            <div class="flex flex-row gap-2">
              <p class="text-lg">CURP:</p>
              <span class="text-lg font-bold">{{
                curpsesControl.value ? curpsesControl.value[0] : "None"
              }}</span>
            </div>
            <div class="flex flex-row gap-2">
              <p class="text-lg">STATUS:</p>
              <span class="text-lg font-bold">DIGITALIZADA</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      class="bg-white border-0 shadow-lg sm:rounded-3xl overflow-hidden w-11/12 p-2"
    >
      <div class="flex flex-row gap-2 mb-0 pb-0">
        <div class="basis-3/12 flex gap-2">
          <div (click)="toggleModal_Configuraciones()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="45"
              height="45"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="icon icon-tabler icons-tabler-outline icon-tabler-settings"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path
                d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"
              />
              <path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" />
            </svg>
          </div>
          <div (click)="toggleModal_UploadEsperadosTipoArchivo()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="45"
              height="45"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="icon icon-tabler icons-tabler-outline icon-tabler-file-upload"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M14 3v4a1 1 0 0 0 1 1h4" />
              <path
                d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"
              />
              <path d="M12 11v6" />
              <path d="M9.5 13.5l2.5 -2.5l2.5 2.5" />
            </svg>
          </div>
        </div>

        <div
          style="
            border-left: 5px solid #bababa;
            height: 50px;
            display: inline-block;
            margin: 0 10px;
          "
        ></div>

        <div class="basis-3/12 flex flex-row w-full mb-0 pb-0" [ngStyle]="{ height: '50px'}">
          <form [formGroup]="myForm_Footer" class="w-full mb-0 pb-0" [ngStyle]="{ height: '70px' }">
            <mat-form-field class="w-full mb-0 pb-0" [ngStyle]="{ height: '70px' }">
              <mat-label>Contenedor</mat-label>
              <mat-select
                class="w-full"

                formControlName="id_contenedor"
                (selectionChange)="selectedValue4()"
              >
                <mat-option
                  class="w-full"

                  *ngFor="let contenedor of contenedores"
                  [value]="contenedor.id"
                  >{{ contenedor.nombre }}</mat-option
                >
              </mat-select>
            </mat-form-field>
          </form>
        </div>

        <div
          style="
            border-left: 5px solid #bababa;
            height: 50px;
            display: inline-block;
            margin: 0 10px;
          "
        ></div>

        <div class="basis-6/12">
          <p>Procesando actualmente:</p>
          <span>Archivo:</span>
        </div>
      </div>
    </div>
  </div>
</div>

@if(showModal_configuraciones){
<!-- Modal -->
<!-- Button to open the modal -->
<!-- Background overlay -->
<div
  class="fixed inset-0 transition-opacity"
  aria-hidden="true"
  (click)="toggleModal_Configuraciones()"
>
  <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
</div>
<!-- Modal -->
<div
  x-show="showModal_configuraciones"
  x-transition:enter="transition ease-out duration-300 transform"
  class="fixed z-10 inset-0 overflow-y-auto"
  x-cloak
>
  <div
    class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"
  >
    <!-- Modal Configuraciones Globales -->
    <div
      class="w-full inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-headline"
    >
      <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
        <!-- Modal content -->
        <div class="flex flex-col items-center justify-center">
          <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
            <h3
              class="text-lg leading-6 font-medium text-gray-900"
              id="modal-headline"
            >
              Configuraciones
            </h3>
            <form [formGroup]="myForm_Config" class="my-2 w-full">
              <mat-form-field class="w-full">
                <mat-label>Tipo Documento a Digitalizar</mat-label>
                <mat-select
                  class="w-full"
                  [ngStyle]="{ height: '25px' }"
                  formControlName="id_tipo_doc_dig"
                  (selectionChange)="selectedValue2()"
                >
                  <mat-option
                    class="w-full"
                    [ngStyle]="{ height: '25px' }"
                    *ngFor="let tipo of tipos_documento_dig"
                    [value]="tipo.id"
                    >{{ tipo.tipo_doc_dig }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </form>

            <div class="mt-2">
              <div class="input-group">
                <label for="sourceInput">Ruta Origen:</label>
                <div class="file-input-wrapper">
                  <input
                    type="text"
                    [value]="sourcePath()"
                    readonly
                    placeholder="Seleccione directorio de origen"
                    (click)="openFileSelector('sourceInput')"
                  />
                  <button
                    type="button"
                    class="button"
                    (click)="openFileSelector('sourceInput')"
                  >
                    Examinar
                  </button>
                </div>
                <input
                  type="file"
                  id="sourceInput"
                  webkitdirectory
                  directory
                  (change)="onSourcePathSelected($event)"
                  style="display: none"
                />
              </div>

              <div class="input-group">
                <label for="destinationInput">Ruta Destino:</label>
                <div class="file-input-wrapper">
                  <input
                    type="text"
                    [value]="destinationPath()"
                    readonly
                    placeholder="Seleccione directorio de destino"
                    (click)="openFileSelector('destinationInput')"
                  />
                  <button
                    type="button"
                    class="button"
                    (click)="openFileSelector('destinationInput')"
                  >
                    Examinar
                  </button>
                </div>
                <input
                  type="file"
                  id="destinationInput"
                  webkitdirectory
                  directory
                  (change)="onDestinationPathSelected($event)"
                  style="display: none"
                />
              </div>

              <div class="input-group w-full">
                <label for="tiempoSyncSeg">Tiempo Sync Segundos</label>
                <div class="file-input-wrapper">
                  <input
                    #tiempoSyncSeg
                    id="tiempoSyncSeg"
                    type="number"
                    [value]="10"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
        <button
          (click)="saveDirectories()"
          [disabled]="!sourcePath() || !destinationPath() || !timeSync()"
          type="button"
          class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-500 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"
        >
          Guardar
        </button>
        <button
          (click)="toggleModal_Configuraciones()"
          type="button"
          class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-200 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>

}

@if(showModal_upload_esperados_tipo_archivo){
<!-- Modal -->
<!-- Button to open the modal -->
<!-- Background overlay -->
<div
  class="fixed inset-0 transition-opacity"
  aria-hidden="true"
  (click)="toggleModal_UploadEsperadosTipoArchivo()"
>
  <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
</div>
<!-- Modal -->
<div
  x-show="showModal_upload_esperados_tipo_archivo"
  x-transition:enter="transition ease-out duration-300 transform"
  class="fixed z-10 inset-0 overflow-y-auto"
  x-cloak
>
  <div
    class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"
  >
    <!-- Modal Upload Esperados por Tipo de Documento -->
    <div
      class="w-full inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-headline"
    >
      <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
        <!-- Modal content -->
        <div class="flex flex-col items-center justify-center">
          <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
            <h3
              class="text-lg leading-6 font-medium text-gray-900"
              id="modal-headline"
            >
              Upload - Esperados por Tipo Documento
            </h3>
            <form [formGroup]="myForm_Upload" class="my-2 w-full">
              <mat-form-field class="w-full">
                <mat-label>Tipo Documento a Digitalizar</mat-label>
                <mat-select
                  class="w-full"
                  [ngStyle]="{ height: '25px' }"
                  formControlName="id_tipo_doc_dig"
                  (selectionChange)="selectedValue3()"
                >
                  <mat-option
                    class="w-full"
                    [ngStyle]="{ height: '25px' }"
                    *ngFor="let tipo of tipos_documento_dig"
                    [value]="tipo.id"
                    >{{ tipo.tipo_doc_dig }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </form>
          </div>
        </div>
      </div>
      <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
        <button
          (click)="saveDirectories()"
          [disabled]="!sourcePath() || !destinationPath() || !timeSync()"
          type="button"
          class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-500 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"
        >
          Guardar
        </button>
        <button
          (click)="toggleModal_UploadEsperadosTipoArchivo()"
          type="button"
          class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-200 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>

}
